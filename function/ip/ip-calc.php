<?php

switch (true) {
  case :// IPアドレス+サブネットマスクを検出

  break;

  case :// IPアドレスのみを検出

  break;
}